@attribute [Microsoft.AspNetCore.Components.RouteAttribute(C.Routes.Root)]
@using ciklonalozi.Modals

<CreateOrder @ref=CreateOrderModal />

<div class="table-responsive">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>#</th>
                <th>Kontakt</th>
                <th>Predmet</th>
                <th>Naručeno</th>
                <th>Zaprimljeno</th>
                <th>Isporučeno</th>
                <th>
                    <button class="btn btn-sm btn-outline-primary" @onclick=AddClicked>Dodaj</button>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var order in Orders)
            {
                var rowClass = string.Empty;
                if (order.Arrival.Date > Today && !order.Arrived.HasValue)
                    rowClass = "table-danger"; 
                else if (order.Arrival.Date == Today && !order.Arrived.HasValue)
                    rowClass = "table-warning";
                else if (order.Arrived.HasValue && order.Arrived.Value.Date < Yesterday && !order.Completed.HasValue)
                    rowClass = "table-danger";
                else if (order.Completed.HasValue)
                    rowClass = "table-success";

                <tr @key=order.OrderId class=@rowClass>
                    <td>@order.OrderId</td>
                    <td>@order.ContactName</td>
                    <td>@order.Subject</td>
                    <td>@Display(order.Arrival)</td>
                    <td>@Display(order.Arrived)</td>
                    <td>@Display(order.Completed)</td>
                    <td>
                        <a class="btn btn-sm btn-outline-secondary" href="@C.Routes.InvoiceFor(order.OrderId)">Izmjena</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>